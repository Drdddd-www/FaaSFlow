global_input:

functions:
- name: start
  source: start
  runtime: 1
  scale: 3
  mem_usage: 0.25
  input:
  output:
    filename:
      type: keys
      size: 8
    file:
      type: pass
      size: 800
  next:
    type: foreach
    nodes:
    - count
- name: count
  source: count
  runtime: 1
  scale: 3
  mem_usage: 0.25
  input:
    filename:
      type: key
      value:
        function: start
        parameter: finename
      size: 8
    file:
      type: pass
      value:
        function: start
        parameter: file
      size: 800
  output:
    wordcount:
      type: pass
      size: 80
  next:
    type: pass
    nodes:
    - merge
- name: merge
  source: merge
  runtime: 1
  scale: 3
  mem_usage: 0.25
  input:
    filename:
      type: key
      value:
        function: start
        parameter: filename
      size: 8
    wordcount:
      type: pass
      value:
        function: count
        parameter: wordcount
      size: 80
  output:
    result:
      type: pass
      size: 80

global_output:
  result:
    type: pass
    value:
      function: merge
      parameter: result
