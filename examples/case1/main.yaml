main:
  type: workflow
  start: generateInput
  end: add
  nodes:
    - generateInput
    - switch1
    - switch2
    - add
  
generateInput:
  type: function
  source: generateInput.py
  next: 
    - switch1
    - switch2

switch1:
  type: switch
  choices:
    - condition: $.generateInput.Output.x < 0
      go: 
        name: negate1
        type: function
        source: negate.py
        parameters:
          x: $.generateInput.Output.x
    - default:
        name: self1
        type: function
        source: self.py
        parameters:
          x: $.generateInput.Output.x
  next: add
  
switch2:
  type: switch
  choices:
    - condition: $.generateInput.Output.y < 0
      go: 
        name: negate2
        type: function
        source: negate.py
        parameters:
          x: $.generateInput.Output.y
    - default:
        name: self2
        type: function
        source: self.py
        parameters:
          x: $.generateInput.Output.y
  next: add

add:
  type: function
  source: add.py
  parameters:
    x: $.switch1.Output.Result
    y: $.switch2.Output.Result


# calculate |x| + |y|
#               generateInput
#                    |
#         |------------------------|       
#         |                        |
#    |----------|            |-----------|
#  (x<0)     (x>=0)        (y>=0)      (y<0)
#    ↓          |            |           ↓
# negate(x)  self(x)       self(y)    negate(y)
#    |----------|            |-----------|
#         |                         |
#         |-------------------------|
#                      ↓
#                   add(x,y)             